package dev.realme.ash.impl.module.exploit;

import dev.realme.ash.api.config.Config;
import dev.realme.ash.api.config.setting.BooleanConfig;
import dev.realme.ash.api.config.setting.NumberConfig;
import dev.realme.ash.api.event.listener.EventListener;
import dev.realme.ash.api.module.ModuleCategory;
import dev.realme.ash.api.module.ToggleModule;
import dev.realme.ash.impl.event.network.ReachEvent;
import dev.realme.ash.impl.event.render.TargetEntityEvent;

public class ReachModule
extends ToggleModule {
    Config<Float> reachConfig = new NumberConfig<Float>("Reach", "The extended reach distance", Float.valueOf(0.0f), Float.valueOf(0.0f), Float.valueOf(3.0f));
    Config<Boolean> noHitboxConfig = new BooleanConfig("NoHitbox", "Ignores hitboxes allowing player to interact through entities", false);

    public ReachModule() {
        super("Reach", "Extends player reach", ModuleCategory.EXPLOITS);
    }

    @Override
    public String getModuleData() {
        return Float.toString(this.reachConfig.getValue().floatValue());
    }

    @EventListener
    public void onReach(ReachEvent event) {
        event.cancel();
        event.setReach(this.reachConfig.getValue().floatValue());
    }

    @EventListener
    public void onTargetEntity(TargetEntityEvent event) {
        event.setCanceled(this.noHitboxConfig.getValue());
    }
}
